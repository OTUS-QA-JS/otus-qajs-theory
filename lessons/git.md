# Git - система контроля версий

## Содержание

- [Что такое Git](#что-такое-git)
- [Основные понятия](#основные-понятия)
- [Установка и настройка](#установка-и-настройка)
- [Локальный репозиторий](#локальный-репозиторий)
- [Работа с изменениями](#работа-с-изменениями)
- [Ветвление](#ветвление)
- [Удаленные репозитории](#удаленные-репозитории)
- [Совместная работа](#совместная-работа)
- [Дополнительные команды](#дополнительные-команды)
- [Хорошие практики](#хорошие-практики)
- [Файл .gitignore](#файл-gitignore)
- [Полезные ресурсы](#полезные-ресурсы)

## Что такое Git

**Git** - распределенная система контроля версий, созданная Линусом Торвальдсом в 2005 году для управления разработкой ядра Linux. Позволяет отслеживать изменения в файлах, возвращаться к предыдущим версиям и координировать совместную работу над проектом.

### Основные возможности

- **Отслеживание изменений** - полная история изменений всех файлов
- **Ветвление** - создание параллельных версий проекта
- **Слияние** - объединение изменений из разных веток
- **Распределенность** - каждая копия репозитория содержит полную историю
- **Совместная работа** - координация работы команды разработчиков

### Области применения

- Разработка программного обеспечения
- Управление документацией
- Отслеживание конфигураций
- Совместная работа над любыми текстовыми файлами

## Основные понятия

### Репозиторий (Repository)
Хранилище проекта, содержащее все файлы и полную историю изменений.

### Коммит (Commit)
Снимок состояния проекта в определенный момент времени. Каждый коммит имеет уникальный идентификатор (хеш) и содержит информацию об изменениях.

### Ветка (Branch)
Параллельная линия разработки. Позволяет работать над новыми функциями, не затрагивая основную версию кода.

### Рабочая директория (Working Directory)
Папка на вашем компьютере, где находятся файлы проекта в текущем состоянии.

### Индекс (Staging Area)
Промежуточная область между рабочей директорией и репозиторием, где подготавливаются изменения для коммита.

### Слияние (Merge)
Процесс объединения изменений из одной ветки в другую.

### Клон (Clone)
Создание полной локальной копии удаленного репозитория.

## Установка и настройка

### Установка Git

**Windows:**
- Скачать с [git-scm.com](https://git-scm.com/downloads)
- Установить с настройками по умолчанию

**macOS:**
```bash
# Через Homebrew
brew install git

# Или использовать встроенный Git (может быть устаревшим)
git --version
```

**Linux:**
```bash
# Ubuntu/Debian
sudo apt install git

# CentOS/RHEL
sudo yum install git
```

### Первоначальная настройка

```bash
# Установить имя пользователя
git config --global user.name "Your Name"

# Установить email
git config --global user.email "you@example.com"

# Проверить настройки
git config --list
```

### Дополнительные настройки

```bash
# Установить редактор по умолчанию
git config --global core.editor "code --wait"

# Настроить окончания строк (для Windows)
git config --global core.autocrlf true

# Настроить алиасы
git config --global alias.st status
git config --global alias.co checkout
git config --global alias.br branch
```

## Локальный репозиторий

### Создание репозитория

**Новый проект:**
```bash
mkdir my-project
cd my-project
git init
```

**Клонирование существующего:**
```bash
git clone https://github.com/user/repository.git
cd repository
```

### Структура Git-репозитория

```
project-folder/
├── .git/           # Служебная папка Git
│   ├── branches/
│   ├── objects/    # Объекты Git (коммиты, деревья, блобы)
│   ├── refs/       # Ссылки на ветки и теги
│   ├── HEAD        # Указатель на текущую ветку
│   └── config      # Настройки репозитория
├── file1.txt       # Файлы проекта
└── file2.txt
```

## Работа с изменениями

### Основные команды

**Проверка статуса:**
```bash
git status              # Полная информация
git status -s           # Краткий формат
```

**Добавление файлов в индекс:**
```bash
git add file.txt        # Добавить конкретный файл
git add .               # Добавить все файлы
git add *.js            # Добавить файлы по маске
git add -A              # Добавить все изменения (включая удаления)
```

**Создание коммита:**
```bash
git commit -m "Описание изменений"
git commit -am "Добавить и закоммитить все изменения"
```

**Просмотр истории:**
```bash
git log                 # Полная история
git log --oneline       # Краткий формат
git log --graph         # С визуализацией веток
git log -n 5            # Последние 5 коммитов
```

### Отмена изменений

**В рабочей директории:**
```bash
git checkout -- file.txt    # Отменить изменения файла
git checkout .               # Отменить все изменения
```

**В индексе:**
```bash
git reset HEAD file.txt      # Убрать файл из индекса
git reset                    # Убрать все файлы из индекса
```

**Отмена коммитов:**
```bash
git reset --soft HEAD~1      # Отменить коммит, оставить изменения в индексе
git reset --mixed HEAD~1     # Отменить коммит и индекс
git reset --hard HEAD~1      # Отменить коммит, индекс и рабочую директорию
```

## Ветвление

### Основные операции с ветками

**Создание и переключение:**
```bash
git branch feature           # Создать ветку
git checkout feature         # Переключиться на ветку
git checkout -b feature      # Создать и переключиться
git switch feature           # Современная команда переключения
git switch -c feature        # Создать и переключиться (новый синтаксис)
```

**Просмотр веток:**
```bash
git branch                   # Локальные ветки
git branch -a                # Все ветки (включая удаленные)
git branch -v                # С информацией о последних коммитах
```

**Удаление веток:**
```bash
git branch -d feature        # Безопасное удаление
git branch -D feature        # Принудительное удаление
```

### Слияние веток

**Обычное слияние:**
```bash
git checkout main
git merge feature
```

**Слияние без fast-forward:**
```bash
git merge --no-ff feature
```

**Перебазирование:**
```bash
git checkout feature
git rebase main
```

### Разрешение конфликтов

При возникновении конфликтов Git помечает проблемные участки:

```
<<<<<<< HEAD
Код из текущей ветки
=======
Код из сливаемой ветки
>>>>>>> feature
```

Алгоритм разрешения:
1. Отредактировать файлы, убрав маркеры конфликтов
2. Добавить исправленные файлы: `git add .`
3. Завершить слияние: `git commit`

## Удаленные репозитории

### Работа с origin

**Добавление удаленного репозитория:**
```bash
git remote add origin https://github.com/user/repo.git
git remote -v                # Просмотр удаленных репозиториев
```

**Отправка изменений:**
```bash
git push origin main         # Отправить ветку main
git push -u origin main      # Установить связь с удаленной веткой
git push                     # После установки связи
```

**Получение изменений:**
```bash
git fetch origin             # Загрузить изменения без слияния
git pull origin main         # Загрузить и слить изменения
git pull                     # После установки связи с веткой
```

### Работа с несколькими репозиториями

```bash
git remote add upstream https://github.com/original/repo.git
git fetch upstream
git merge upstream/main
```

## Совместная работа

### Workflow с Pull Request

1. **Fork репозитория** на GitHub/GitLab
2. **Клонировать** свой fork локально
3. **Создать ветку** для новой функции
4. **Внести изменения** и создать коммиты
5. **Отправить ветку** в свой fork
6. **Создать Pull Request** в оригинальный репозиторий

### GitHub Flow

```bash
# 1. Создать ветку от main
git checkout -b feature/new-functionality

# 2. Внести изменения и создать коммиты
git add .
git commit -m "Add new functionality"

# 3. Отправить ветку на GitHub
git push origin feature/new-functionality

# 4. Создать Pull Request через веб-интерфейс
# 5. После ревью и слияния удалить ветку
git checkout main
git pull origin main
git branch -d feature/new-functionality
```

## Дополнительные команды

### Временное сохранение изменений

```bash
git stash                    # Сохранить изменения
git stash save "Описание"    # С описанием
git stash list               # Список сохранений
git stash apply              # Применить последнее сохранение
git stash apply stash@{1}    # Применить конкретное сохранение
git stash pop                # Применить и удалить из стека
git stash drop               # Удалить сохранение
```

### Выборочное применение коммитов

```bash
git cherry-pick abc123       # Применить коммит из другой ветки
git cherry-pick abc123..def456  # Диапазон коммитов
```

### Информация и диагностика

```bash
git show abc123              # Показать коммит
git diff                     # Изменения в рабочей директории
git diff --cached            # Изменения в индексе
git diff HEAD~1              # Сравнить с предыдущим коммитом
git blame file.txt           # Кто изменял каждую строку
git log --follow file.txt    # История конкретного файла
```

## Хорошие практики

### Коммиты

**Атомарность:**
- Один коммит = одна логическая единица изменений
- Не смешивайте исправления багов с новой функциональностью

**Сообщения коммитов:**
```
Краткое описание (до 50 символов)

Более подробное описание, если необходимо.
Объясните что и почему, а не как.

- Можно использовать списки
- Каждый пункт с новой строки

Fixes #123
```

**Форматы сообщений:**
```bash
feat: добавить новую функцию
fix: исправить баг в валидации
docs: обновить README
style: исправить форматирование
refactor: рефакторинг функции загрузки
test: добавить тесты для API
chore: обновить зависимости
```

### Ветвление

**Стратегии именования:**
- `feature/login-form` - новая функциональность
- `fix/header-layout` - исправление бага
- `hotfix/security-patch` - критическое исправление
- `release/v1.2.0` - подготовка релиза

**Правила работы:**
- Не работайте напрямую в main/master
- Регулярно синхронизируйтесь с основной веткой
- Удаляйте ветки после слияния

### Pre-commit checklist

- [ ] Все файлы сохранены
- [ ] Нет неотслеживаемых файлов (если они нужны)
- [ ] Код проходит линтеры (ESLint, Prettier)
- [ ] Тесты выполняются успешно
- [ ] Нет debug-кода и console.log
- [ ] Осмысленное сообщение коммита

## Файл .gitignore

### Что исключать из отслеживания

**Конфиденциальные данные:**
```gitignore
# Переменные окружения
.env
.env.local
.env.production

# Секреты и ключи
config/secrets.yml
*.key
*.pem
```

**Сгенерированные файлы:**
```gitignore
# Зависимости
node_modules/
vendor/

# Сборка
dist/
build/
*.min.js

# Логи
logs/
*.log
npm-debug.log*
```

**Системные файлы:**
```gitignore
# macOS
.DS_Store

# Windows
Thumbs.db
Desktop.ini

# IDE
.vscode/
.idea/
*.swp
*.swo
```

### Шаблоны .gitignore

GitHub предоставляет готовые шаблоны:
- [github.com/github/gitignore](https://github.com/github/gitignore)

Для Node.js проекта:
```gitignore
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Production build
dist/
build/

# Environment variables
.env
.env.local
.env.production

# IDE
.vscode/
.idea/

# OS generated files
.DS_Store
Thumbs.db
```

## Полезные ресурсы

### Обучающие материалы

- [Git How To](https://githowto.com/ru) - интерактивный учебник
- [Learn Git Branching](https://learngitbranching.js.org/?locale=ru_RU) - визуализация веток
- [Oh My Git!](https://ohmygit.org/) - игра для изучения Git
- [Pro Git Book](https://git-scm.com/book/ru/v2) - официальная документация

### Графические интерфейсы

- **GitHub Desktop** - простой GUI для GitHub
- **GitKraken** - мощный графический клиент
- **Sublime Merge** - быстрый и элегантный интерфейс
- **VS Code** - встроенная поддержка Git

### Платформы хостинга

- **GitHub** - крупнейшая платформа для открытого кода
- **GitLab** - полноценная DevOps платформа
- **Bitbucket** - интеграция с Atlassian продуктами
- **Azure DevOps** - решение от Microsoft

### Справочные материалы

- [Шпаргалка по Git](https://education.github.com/git-cheat-sheet-education.pdf)
- [Ёбаный Git!!!](https://ohshitgit.com/ru) - решение частых проблем
- [Git Workflow Guide](https://www.atlassian.com/git/tutorials/comparing-workflows)
- [Semantic Commit Messages](https://gist.github.com/joshbuchea/6f47e86d2510bce28f8e7f42ae84c716)

---

**Ключевые команды для запоминания:**
- `git status` - проверить статус
- `git add .` - добавить все изменения
- `git commit -m "message"` - создать коммит
- `git push` - отправить изменения
- `git pull` - получить изменения
- `git checkout -b branch` - создать и переключиться на ветку