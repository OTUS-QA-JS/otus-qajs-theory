# Основы JS: Объекты и массивы

## Содержание
- [Объекты](#объекты)
- [Массивы](#массивы)
- [Перебор коллекций](#перебор-коллекций)
- [Работа с переменными окружения](#работа-с-переменными-окружения)
- [Дополнительные концепции](#дополнительные-концепции)
- [Полезные ресурсы](#полезные-ресурсы)

## Объекты
**Объекты** в JavaScript — это структуры данных, которые используются для хранения коллекций именованных значений и более сложных сущностей. Объект можно создать с помощью фигурных скобок `{}`.

```javascript
const user = {
  username: 'student',
  age: 25
};
```

### Свойства и методы
Объект состоит из свойств. **Свойство** – это пара «ключ: значение».
- **Ключ** (или имя свойства) — это строка или символ.
- **Значение** может быть любого типа данных.

Если значением свойства является функция, такое свойство называется **методом**.

```javascript
const user = {
  username: 'student',
  greet: function() {
    console.log('Hello!');
  }
};
```

### Доступ к свойствам
Существует два способа получить доступ к значению свойства:

1.  **Через точку**: `user.username`
    - Просто и читаемо. Не работает, если ключ содержит пробелы или является числом.

2.  **Через квадратные скобки**: `user['username']`
    - Позволяет использовать в качестве ключа любое выражение или строку с пробелами.
    - Необходимо для **вычисляемых свойств**, когда имя ключа берется из переменной.

```javascript
const user = {
  'first name': 'John',
  age: 30
};

console.log(user['first name']); // John

const key = 'age';
console.log(user[key]); // 30
```

### Операторы для работы с объектами
- `delete`: Удаляет свойство из объекта.
  ```javascript
  delete user.age;
  ```
- `in`: Проверяет, существует ли свойство с указанным ключом в объекте.
  ```javascript
  console.log('age' in user); // false
  ```

## Массивы
**Массив (array)** — это упорядоченная коллекция данных. Массивы являются подтипом объектов, но с дополнительными методами для работы с коллекциями.

### Создание массива и доступ к элементам
Массив создается с помощью квадратных скобок `[]`.

```javascript
const firstArray = [1, 'hello', true];
const emptyArray = [];
```

Доступ к элементам осуществляется по их **индексу**. Нумерация элементов в массиве начинается с нуля.

```javascript
const numbers = [10, 20, 30];
console.log(numbers[0]); // 10
console.log(numbers[2]); // 30
console.log(numbers[3]); // undefined
```

Современный способ доступа к элементам — метод `.at()`, который позволяет использовать отрицательные индексы для доступа к элементам с конца массива.

```javascript
const numbers = [10, 20, 30];
console.log(numbers.at(0));  // 10
console.log(numbers.at(-1)); // 30 (последний элемент)
```

### Основные методы массивов
- `.map()`: Создает новый массив, применив функцию к каждому элементу исходного массива.
- `.forEach()`: Выполняет функцию для каждого элемента массива.
- `.filter()`: Создает новый массив со всеми элементами, прошедшими проверку.
- `.find()`: Возвращает значение первого найденного в массиве элемента, который удовлетворяет условию.
- `.every()`: Проверяет, удовлетворяют ли все элементы массива условию.
- `.some()`: Проверяет, удовлетворяет ли какой-либо элемент массива условию.

## Перебор коллекций

### `for...in` (для объектов)
Перебирает ключи (имена свойств) объекта.

```javascript
const user = { name: 'John', age: 30 };
for (const key in user) {
  console.log(key); // name, age
  console.log(user[key]); // John, 30
}
```

### `for...of` (для массивов)
Перебирает значения элементов массива (и других итерируемых объектов).

```javascript
const letters = ['a', 'b', 'c'];
for (const letter of letters) {
  console.log(letter); // a, b, c
}
```

## Работа с переменными окружения
**Переменная окружения** — это текстовая переменная операционной системы, которая хранит информацию о настройках. В тестировании они используются для передачи в тесты конфигурации, зависящей от окружения (например, URL стенда, логины, пароли).

### Пакет `dotenv`
Пакет `dotenv` загружает переменные окружения из файла `.env` в `process.env` в Node.js.

1.  **Установка**:
    ```bash
    npm install dotenv --save-dev
    ```

2.  **Использование**:
    Создайте файл `.env` в корне проекта:
    ```
    BASE_URL=http://my-test-stand.com
    LOGIN=user1
    ```

    Для загрузки этих переменных в Jest, можно обновить конфигурацию `jest.config.js` или команду в `package.json`:

    ```bash
    # package.json -> scripts -> test
    "test": "jest --setupFiles dotenv/config"
    ```

## Дополнительные концепции

### Деструктуризация
Синтаксис, который позволяет извлекать свойства из объектов или элементы из массивов в отдельные переменные.

```javascript
// Деструктуризация объекта
const config = { username: 'admin', port: 8080 };
const { username, port } = config;
console.log(username); // 'admin'

// Деструктуризация массива
const coordinates = [11, 22];
const [x, y] = coordinates;
console.log(x); // 11
```

### Spread-синтаксис (`...`)
Позволяет "разворачивать" элементы массива или свойства объекта в местах, где ожидается их перечисление.

```javascript
const arr1 = [1, 2];
const arr2 = [...arr1, 3, 4]; // [1, 2, 3, 4]

const obj1 = { a: 1, b: 2 };
const obj2 = { ...obj1, c: 3 }; // { a: 1, b: 2, c: 3 }
```

### Параметры по умолчанию
Позволяют задавать значения по умолчанию для параметров функции, если они не были переданы.

```javascript
function sum(a = 0, b = 0) {
  return a + b;
}

console.log(sum(5)); // 5 (a=5, b=0)
```

### Асинхронность: `Promise` и `async/await`
- **Promise**: Объект, представляющий результат асинхронной операции, которая еще не завершена. Может находиться в состояниях `pending`, `fulfilled` или `rejected`.
- **`async/await`**: Синтаксический сахар для работы с промисами, который позволяет писать асинхронный код, выглядящий как синхронный.

```javascript
async function fetchData() {
  try {
    // await работает только внутри async-функций
    const response = await fetch('https://api.example.com/data');
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Ошибка загрузки:', error);
  }
}
```

## Полезные ресурсы
- **MDN Web Docs: Array**: [Полный справочник по методам массивов](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array)