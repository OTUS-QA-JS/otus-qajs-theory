# Основы JavaScript: Классы

## Содержание
- [Что такое класс?](#что-такое-класс)
- [Синтаксис класса](#синтаксис-класса)
- [Ключевые понятия](#ключевые-понятия)
- [Свойства класса](#свойства-класса)
- [Геттеры и сеттеры](#геттеры-и-сеттеры)
- [Наследование](#наследование)
- [Применение классов в тестировании](#применение-классов-в-тестировании)

## Что такое класс?

В объектно-ориентированном программировании **класс** — это шаблон или чертеж для создания объектов. Он определяет начальные значения свойств и реализацию поведения (методы), которые будут у всех объектов, созданных на его основе.

В JavaScript классы являются "синтаксическим сахаром" над существующим прототипным наследованием. Это более удобный и привычный синтаксис для создания объектов и организации наследования, особенно для разработчиков, пришедших из других языков, таких как Java или C++.

Классы используются, когда нужно создать множество однотипных объектов, например, пользователей, товары или фикстуры для тестов.

## Синтаксис класса

Класс определяется с помощью ключевого слова `class`. Имя класса принято писать в стиле `UpperCamelCase`.

```javascript
class User {
  // 1. Свойство класса (может быть объявлено здесь)
  isActive = true;

  // 2. Конструктор: вызывается при создании нового объекта через `new`
  constructor(name) {
    // `this` ссылается на будущий экземпляр объекта
    this.name = name;
  }

  // 3. Метод: функция, определяющая поведение объекта
  sayHi() {
    console.log(`Привет, ${this.name}!`);
  }
}

// 4. Создание экземпляра (инстанса) класса
const user = new User('Дамир');

// 5. Вызов метода
user.sayHi(); // Вывод: Привет, Дамир!
console.log(user.name); // Вывод: Дамир
console.log(user.isActive); // Вывод: true
```

## Ключевые понятия

- **Класс (Class)**: Шаблон для создания объектов.
- **Экземпляр (Instance)**: Конкретный объект, созданный из класса с помощью оператора `new`.
- **Конструктор (constructor)**: Специальный метод для инициализации объекта. Вызывается автоматически при создании экземпляра.
- **Свойство (Property)**: Переменная, связанная с классом или его экземпляром, хранящая данные.
- **Метод (Method)**: Функция, связанная с классом, которая определяет его поведение.
- **`this`**: Ключевое слово, которое внутри методов класса ссылается на текущий экземпляр объекта.

## Свойства класса

### Приватные свойства и методы
Для создания приватных (закрытых) полей, доступных только внутри класса, используется префикс `#`.

```javascript
class Coffeemaker {
  #waterLimit = 200;

  checkWater(value) {
    if (value < 0) throw new Error("Отрицательный уровень воды");
    if (value > this.#waterLimit) throw new Error("Слишком много воды");
  }
}

const coffee = new Coffeemaker();
// coffee.#waterLimit = 300; // Ошибка: Private field '#waterLimit' must be declared in an enclosing class
```

### Статические свойства и методы
Статические члены (свойства и методы) принадлежат самому классу, а не его экземплярам. Они вызываются напрямую на классе.

```javascript
class MathTool {
  static PI = 3.14159;

  static circleLength(radius) {
    return 2 * this.PI * radius;
  }
}

console.log(MathTool.PI); // 3.14159
console.log(MathTool.circleLength(10)); // 62.8318
```

## Геттеры и сеттеры

Это специальные методы, которые выглядят как обычные свойства, но позволяют выполнять код при чтении или записи значения.

- `get` — срабатывает при чтении свойства.
- `set` — срабатывает при присваивании значения свойству.

```javascript
class User {
  constructor(firstName, lastName) {
    this.firstName = firstName;
    this.lastName = lastName;
  }

  // Геттер для получения полного имени
  get fullName() {
    return `${this.firstName} ${this.lastName}`;
  }

  // Сеттер для установки полного имени
  set fullName(value) {
    [this.firstName, this.lastName] = value.split(' ');
  }
}

const user = new User('Иван', 'Петров');
console.log(user.fullName); // Иван Петров (сработал get)

user.fullName = 'Петр Иванов'; // (сработал set)
console.log(user.firstName); // Петр
```

## Наследование

Классы могут наследовать свойства и методы от других классов. Это позволяет создавать иерархии и переиспользовать код.

- `extends` — ключевое слово для наследования.
- `super` — ключевое слово для вызова конструктора и методов родительского класса.

```javascript
// Родительский класс
class Animal {
  constructor(name) {
    this.speed = 0;
    this.name = name;
  }
  run(speed) {
    this.speed = speed;
    console.log(`${this.name} бежит со скоростью ${this.speed}.`);
  }
}

// Дочерний класс
class Rabbit extends Animal {
  // Вызов конструктора родителя обязателен перед использованием `this`
  constructor(name, earLength) {
    super(name); // Вызываем конструктор Animal
    this.earLength = earLength;
  }

  hide() {
    console.log(`${this.name} прячется!`);
  }
}

const rabbit = new Rabbit("Белый кролик", 10);
rabbit.run(5);
console.log(rabbit.earLength); // 10
rabbit.hide();
```

## Применение классов в тестировании

- **Организация кода**: Классы помогают структурировать сложную логику, например, в слое API-сервисов.
- **Инициализация тестовых данных**: Классы отлично подходят для создания фабрик или строителей фикстур.
- **Расширение и повторное использование**: Наследование позволяет создавать базовые классы (например, `BasePage`, `BaseService`) и расширять их для конкретных нужд.
- **Управление состоянием**: Классы лежат в основе таких паттернов, как Page Object в UI-тестировании.
- **Улучшение читаемости**: Хорошо спроектированные классы делают код тестов более понятным и поддерживаемым.