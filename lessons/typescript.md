# TypeScript: Основы и настройка окружения

## Содержание
- [Что такое TypeScript?](#что-такое-typescript)
- [Основные понятия](#основные-понятия)
- [Настройка окружения](#настройка-окружения)
- [Основы синтаксиса](#основы-синтаксиса)
- [Миграция проекта с JS на TS](#миграция-проекта-с-js-на-ts)
- [Полезные ресурсы](#полезные-ресурсы)

## Что такое TypeScript?

**TypeScript (TS)** — это язык программирования с открытым исходным кодом, разработанный Microsoft. Он является строгой надстройкой над JavaScript (a typed superset of JavaScript), что означает, что любая валидная JavaScript-программа также является валидной TypeScript-программой.

Основная цель TypeScript — добавление **статической типизации** в JavaScript. Это позволяет выявлять множество ошибок на этапе написания кода, а не во время его выполнения, а также значительно улучшает автодополнение и навигацию по коду в редакторах.

## Основные понятия

-   **Статическая типизация (Static Typing)**: Типы переменных, параметров функций и возвращаемых значений определяются и проверяются на этапе компиляции, а не во время выполнения программы.
-   **Компиляция (Transpilation)**: Код TypeScript не может быть выполнен напрямую в браузере или Node.js. Он должен быть сначала скомпилирован (транспилирован) в чистый JavaScript. Этим занимается компилятор TypeScript (`tsc`) или другие инструменты, такие как Babel.
-   **Файлы деклараций (`*.d.ts`)**: Это файлы, которые содержат только описания типов. Они позволяют использовать существующие JavaScript-библиотеки в TypeScript-проектах, предоставляя компилятору информацию о типах этих библиотек. Например, пакет `@types/jest` содержит файлы деклараций для фреймворка Jest.

## Настройка окружения

### Установка TypeScript
```bash
npm install typescript --save-dev
```

### Файл конфигурации `tsconfig.json`
Этот файл содержит настройки для компилятора TypeScript. Его можно создать автоматически с помощью команды:
```bash
npx tsc --init
```

### Интеграция с Babel
Babel может использоваться для компиляции TypeScript в JavaScript, что особенно полезно для контроля над версиями JavaScript и полифиллами.

1.  **Установка пресета**:
    ```bash
    npm install --save-dev @babel/preset-typescript
    ```
2.  **Настройка `babel.config.json`**:
    Добавьте `@babel/preset-typescript` в массив `presets`.
    ```json
    {
      "presets": [
        ["@babel/preset-env", {
          "targets": { "node": "20" }
        }],
        "@babel/preset-typescript"
      ]
    }
    ```

### Интеграция с Jest
При использовании Babel, пакет `babel-jest` автоматически трансформирует TypeScript-файлы во время запуска тестов. Для корректной работы автодополнения и проверки типов в тестах необходимо установить файлы деклараций:
```bash
npm install --save-dev @types/jest
```

### Интеграция с ESLint
Чтобы ESLint мог анализировать TypeScript-код, требуется дополнительная настройка.

1.  **Установка зависимостей**:
    ```bash
    npm install --save-dev typescript-eslint
    ```
2.  **Настройка конфигурации ESLint**:
    Проще всего запустить `npm init @eslint/config@latest` и следовать инструкциям, выбрав TypeScript. Либо можно настроить вручную, следуя [официальной документации](https://typescript-eslint.io/getting-started).

### Проверка типов в JS-файлах
Для частичного использования преимуществ TypeScript в обычных `.js` файлах, можно добавить комментарий `// @ts-check` в начало файла. Это включит базовую проверку типов в поддерживаемых редакторах кода.

## Основы синтаксиса

### Типизация функций
Типы указываются для параметров функции и для возвращаемого значения.

```typescript
const sum = (a: number, b: number): number => {
  return a + b;
};
```

### Описание объектов: `interface` и `type`
Для описания формы объектов можно использовать `interface` или `type`. Они во многом взаимозаменяемы.

-   **`type` (псевдоним типа)**:
    ```typescript
    type LoginPayload = {
      username: string;
      password: string;
    };
    ```

-   **`interface` (интерфейс)**:
    ```typescript
    interface LoginPayload {
      username: string;
      password: string;
    };
    ```

Использование в функции:
```typescript
const login = ({ username, password }: LoginPayload) => {
  // ...
};
```

### Управление ошибками типов
Иногда необходимо обойти проверку типов. Для этого существуют специальные комментарии:
-   `// @ts-ignore`: Полностью игнорирует ошибку в следующей строке.
-   `// @ts-expect-error`: Сообщает TypeScript, что в следующей строке ожидается ошибка. Если ошибки не будет, компилятор сам выдаст ошибку.

## Миграция проекта с JS на TS

1.  **Настройте окружение**: Установите и настройте TypeScript, Babel, ESLint, как описано выше.
2.  **Создайте `tsconfig.json`**: `npx tsc --init`.
3.  **Переименовывайте файлы**: Постепенно меняйте расширения файлов с `.js` на `.ts` или `.tsx`.
4.  **Исправляйте ошибки**: После переименования компилятор начнет находить ошибки типов. Исправляйте их, добавляя необходимые типы, или временно подавляйте с помощью `// @ts-expect-error`.

Для автоматизации этого процесса можно использовать утилиту `ts-migrate` от Airbnb:
```bash
npm install -g ts-migrate
ts-migrate-full .
```

## Полезные ресурсы
-   **TypeScript Handbook**: [The Basics](https://www.typescriptlang.org/docs/handbook/2/basic-types.html), [Everyday Types](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html)
-   **Total TypeScript**: [Type vs Interface: Which Should You Use?](https://www.totaltypescript.com/type-vs-interface)
-   **Code Basic**: [Курс по TypeScript](https://www.youtube.com/watch?v=Bxg-a_2-tF8)